import{r as a,u as $,a as U,O as q,C as A,b as p,c as r,d as V,E as Q,U as X,e as Y,M as I,j as e,W as Z,D as ee}from"./projects-BRTcxqWl.js";import{u as te}from"./useStats-BMUJc4js.js";import"./inspector-BGeovSOK.js";import{C as m}from"./CustomControl-DaYTGWX8.js";import"./react-three-fiber.esm-BCsrm-ud.js";const E=new Z(1024),C=new A(.1,1e3,E),ae=new I({envMap:E.texture,metalness:1,roughness:0});C.position.set(0,-20,0);const b=new I({color:new p().setHSL(.32,.6,.08),side:ee}),P=["MeshBasicMaterial","MeshStandardMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshPhysicalMaterial","MeshToonMaterial","MeshMatcapMaterial","MeshNormalMaterial"],L=["cube","sphere","plane"],re=P.reduce((o,t)=>(o[t]=t,o),{}),se=L.reduce((o,t)=>(o[t]=t,o),{}),O=["None","SpruitSunrise","MilkyWay","MilkyWay","Park3Med","SkyboxSun","Pisa"],ne=O.reduce((o,t)=>(o[t]=t,o),{}),oe=1,ce=300,fe=a.memo(function(){const{scene:t,camera:x}=$();te(),U(()=>{r.updateCubeCamera(C)});const n=a.useRef({}),M=a.useRef({}),[h,v]=a.useState("None"),[_,H]=a.useState(!0),[R,N]=a.useState("default"),[d,z]=a.useState(null),[G,F]=a.useState(L[1]),[u,W]=a.useState(80),w=a.useRef(!0),g=a.useRef({currentMaterialType:P[1],currentMeshType:G,tessellation:u,showPlatform:_,platformMaterial:R,sceneBackgroundName:O[0]}),B=!!d;if(a.useEffect(()=>{x.position.set(0,0,22),x.rotation.set(0,0,0),x instanceof q&&(x.zoom=30)},[x]),a.useEffect(()=>(t.add(C),t.background=new p().setHex(0),t.environment=null,(async()=>{const c=await r.createTexturesFromImages("textures/background/equirectangular/spruit_sunrise_4k.hdr.jpg",{}),k=await r.createTexturesFromImages(["px","nx","py","ny","pz","nz"].map(i=>`textures/background/cube/MilkyWay/dark-s_${i}.jpg`),{}),y=await r.createTexturesFromImages(["px","nx","py","ny","pz","nz"].map(i=>`textures/background/cube/Park3Med/${i}.jpg`),{}),j=await r.createTexturesFromImages(["px","nx","py","ny","pz","nz"].map(i=>`textures/background/cube/skyboxsun25deg/${i}.jpg`),{}),T=await r.createTexturesFromImages(["px","nx","py","ny","pz","nz"].map(i=>`textures/background/cube/pisa/${i}.png`),{}),[S,s,l,J,K]=[c,k,y,j,T].map(i=>{const f=i[0];return f.mapping=f instanceof Y?V:f.image.width/f.image.height===2?Q:X,f.needsUpdate=!0,f});M.current={SpruitSunrise:S,MilkyWay:s,Park3Med:l,SkyboxSun:J,Pisa:K}})(),r.setShowAxesHelper(!1),r.setShowGridHelper(!1),r.setShowGizmos(w.current),()=>{t.background=new p().setHex(0),t.environment=null}),[t]),a.useEffect(()=>{h&&(M.current[h]?(t.background=M.current[h],t.environment=M.current[h],h==="SpruitSunrise"?b.color=new p().setHSL(.13,.61,.08):h==="MilkyWay"?b.color=new p().setHSL(.64,.61,.08):b.color=new p().setHSL(0,0,.07)):(t.background=new p().setHex(0),t.environment=null,b.color=new p().setHSL(0,0,.07)))},[t,h]),a.useEffect(()=>{(async()=>{const[c,k,y,j,T]=await r.createTexturesFromImages(["Rocks005_1K-JPG_Color","Rocks005_1K-JPG_Displacement","Rocks005_1K-JPG_NormalGL","Rocks005_1K-JPG_Roughness","Rocks005_1K-JPG_AmbientOcclusion"].map(s=>`textures/ambientcg/Rocks005/${s}.jpg`),{}),S={map:c,displacementMap:k,normalMap:y,roughnessMap:j,aoMap:T};P.forEach(s=>{n.current[s]||(n.current[s]=r.getMaterialFromType(s,{}),Object.keys(S).forEach(l=>{Object.hasOwn(n.current[s],l)&&(n.current[s][l]=S[l],l==="displacementMap"?n.current[s].displacementScale=1:l==="aoMap"?n.current[s].aoMapIntensity=1:l==="roughnessMap"&&(n.current[s].roughness=1))}),n.current[s].needsUpdate=!0)}),z(n.current[g.current.currentMaterialType])})()},[]),a.useEffect(()=>{r.updateSceneBBox()},[B]),!B)return null;const D={cube:e.jsx("mesh",{material:d,castShadow:!0,receiveShadow:!0,__inspectorData:{isInspectable:!0},name:"cube",children:e.jsx("boxGeometry",{args:[10,10,10,u,u,u]})}),sphere:e.jsx("mesh",{material:d,castShadow:!0,receiveShadow:!0,__inspectorData:{isInspectable:!0},name:"sphere",children:e.jsx("sphereGeometry",{args:[10,u,u]})}),plane:e.jsx("mesh",{material:d,castShadow:!0,receiveShadow:!0,__inspectorData:{isInspectable:!0},name:"plane",children:e.jsx("planeGeometry",{args:[10,10,u,u]})})};return e.jsxs(e.Fragment,{children:[e.jsx("directionalLight",{"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"shadow-radius":4,"shadow-camera-right":15,"shadow-camera-left":-15,"shadow-camera-top":15,"shadow-camera-bottom":-15,"shadow-blurSamples":8,"shadow-bias":-.0014,castShadow:!0,position:[-20,20,20],scale:1,intensity:4.5,color:"white"}),e.jsx("spotLight",{castShadow:!0,position:[20,20,20],scale:1,intensity:6,power:20,distance:70,color:"white",angle:Math.PI/8,penumbra:.5,decay:.4}),e.jsx("ambientLight",{color:"#ffffff",intensity:.1,position:[0,20,0]}),D[G],e.jsx("mesh",{name:"platform",rotation:[-1.571,0,0],position:[0,-20,0],receiveShadow:!0,material:R==="default"?b:ae,visible:_,__inspectorData:{isInspectable:!0},children:e.jsx("boxGeometry",{args:[100,100,5]})}),e.jsx(m,{name:"material",object:g.current,prop:"currentMaterialType",control:{label:"Current Material",options:re,onChange:c=>{z(n.current[c]),r.refreshCPanel()}}}),e.jsx(m,{name:"mesh",object:g.current,prop:"currentMeshType",control:{label:"Current Mesh",options:se,onChange:c=>{F(c)}}}),e.jsx(m,{name:"tessellation",object:g.current,prop:"tessellation",control:{label:"Tessellation",min:oe,max:ce,step:1,onChange:c=>{W(c)}}}),Object.hasOwn(d,"wireframe")&&e.jsx(m,{name:"wireframe",object:d,prop:"wireframe",control:{label:"Wireframe"}},d.uuid),e.jsx(m,{name:"showPlatform",object:g.current,prop:"showPlatform",control:{label:"Show Platform",onChange:H}}),e.jsx(m,{name:"platformMaterial",object:g.current,prop:"platformMaterial",control:{label:"Platform Material",options:{default:"default",mirror:"mirror"},onChange:N}}),e.jsx(m,{name:"sceneBackgroundName",object:g.current,prop:"sceneBackgroundName",control:{label:"Scene Background",options:ne,onChange:v}}),e.jsx(m,{name:"showGizmos",control:{label:"Toggle Gizmos",title:"Toggle Gizmos",onClick:()=>{r.setShowGizmos(!w.current),w.current=!w.current}}})]})});export{fe as MaterialTest,fe as default};
//# sourceMappingURL=MaterialTest-CYhTve-U.js.map
