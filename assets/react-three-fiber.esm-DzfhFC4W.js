import{r as t,b as M,t as J,j as u,v as K,e as Q,T as V,w as Z,x as _,y as $,d as ee,f as ne,z as re,E as te,B as oe,G as se}from"./projects-CBBEbLtg.js";const he=t.memo(({experiences:e=[]})=>{const r=M(o=>o.setExperiences),s=M(o=>o.setCurrentExperience),c=M(o=>o.currentExperience);return t.useEffect(()=>{if(e.length===0)return;r(e.map(a=>a.name));const o=J()??e[0]?.name;s(o)},[r,e,s]),t.useMemo(()=>{if(!c)return null;const o=e.find(a=>a.name===c)?.Experience;return o?u.jsx(t.Suspense,{fallback:"Loading experienceâ€¦",children:u.jsx(o,{})}):null},[e,c])});function W(e,r){let s;return(...c)=>{window.clearTimeout(s),s=window.setTimeout(()=>e(...c),r)}}function ie({debounce:e,scroll:r,polyfill:s,offsetSize:c}={debounce:0,scroll:!1,offsetSize:!1}){const f=s||(typeof window>"u"?class{}:window.ResizeObserver);if(!f)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=t.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),n=t.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),h=e?typeof e=="number"?e:e.scroll:null,w=e?typeof e=="number"?e:e.resize:null,p=t.useRef(!1);t.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[R,x,d]=t.useMemo(()=>{const i=()=>{if(!n.current.element)return;const{left:j,top:H,width:B,height:z,bottom:O,right:k,x:S,y:b}=n.current.element.getBoundingClientRect(),l={left:j,top:H,width:B,height:z,bottom:O,right:k,x:S,y:b};n.current.element instanceof HTMLElement&&c&&(l.height=n.current.element.offsetHeight,l.width=n.current.element.offsetWidth),Object.freeze(l),p.current&&!ae(n.current.lastBounds,l)&&a(n.current.lastBounds=l)};return[i,w?W(i,w):i,h?W(i,h):i]},[a,c,h,w]);function E(){n.current.scrollContainers&&(n.current.scrollContainers.forEach(i=>i.removeEventListener("scroll",d,!0)),n.current.scrollContainers=null),n.current.resizeObserver&&(n.current.resizeObserver.disconnect(),n.current.resizeObserver=null),n.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",n.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",n.current.orientationHandler))}function y(){n.current.element&&(n.current.resizeObserver=new f(d),n.current.resizeObserver.observe(n.current.element),r&&n.current.scrollContainers&&n.current.scrollContainers.forEach(i=>i.addEventListener("scroll",d,{capture:!0,passive:!0})),n.current.orientationHandler=()=>{d()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",n.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",n.current.orientationHandler))}const L=i=>{!i||i===n.current.element||(E(),n.current.element=i,n.current.scrollContainers=Y(i),y())};return ue(d,!!r),ce(x),t.useEffect(()=>{E(),y()},[r,d,x]),t.useEffect(()=>E,[]),[L,o,R]}function ce(e){t.useEffect(()=>{const r=e;return window.addEventListener("resize",r),()=>void window.removeEventListener("resize",r)},[e])}function ue(e,r){t.useEffect(()=>{if(r){const s=e;return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)}},[e,r])}function Y(e){const r=[];if(!e||e===document.body)return r;const{overflow:s,overflowX:c,overflowY:f}=window.getComputedStyle(e);return[s,c,f].some(o=>o==="auto"||o==="scroll")&&r.push(e),[...r,...Y(e.parentElement)]}const le=["x","y","top","bottom","left","right","width","height"],ae=(e,r)=>le.every(s=>e[s]===r[s]);function de({ref:e,children:r,fallback:s,resize:c,style:f,gl:o,events:a=ne,eventSource:n,eventPrefix:h,shadows:w,linear:p,flat:R,legacy:x,orthographic:d,frameloop:E,dpr:y,performance:L,raycaster:i,camera:j,scene:H,onPointerMissed:B,onCreated:z,...O}){t.useMemo(()=>Q(V),[]);const k=Z(),[S,b]=ie({scroll:!0,debounce:{scroll:50,resize:0},...c}),l=t.useRef(null),T=t.useRef(null);t.useImperativeHandle(e,()=>l.current);const I=_(B),[X,D]=t.useState(!1),[A,G]=t.useState(!1);if(X)throw X;if(A)throw A;const C=t.useRef(null);$(()=>{const g=l.current;if(b.width>0&&b.height>0&&g){C.current||(C.current=ee(g));async function P(){await C.current.configure({gl:o,scene:H,events:a,shadows:w,linear:p,flat:R,legacy:x,orthographic:d,frameloop:E,dpr:y,performance:L,raycaster:i,camera:j,size:b,onPointerMissed:(...m)=>I.current==null?void 0:I.current(...m),onCreated:m=>{m.events.connect==null||m.events.connect(n?re(n)?n.current:n:T.current),h&&m.setEvents({compute:(F,v)=>{const U=F[h+"X"],q=F[h+"Y"];v.pointer.set(U/v.size.width*2-1,-(q/v.size.height)*2+1),v.raycaster.setFromCamera(v.pointer,v.camera)}}),z?.(m)}}),C.current.render(u.jsx(k,{children:u.jsx(te,{set:G,children:u.jsx(t.Suspense,{fallback:u.jsx(oe,{set:D}),children:r??null})})}))}P()}}),t.useEffect(()=>{const g=l.current;if(g)return()=>se(g)},[]);const N=n?"none":"auto";return u.jsx("div",{ref:T,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:N,...f},...O,children:u.jsx("div",{ref:S,style:{width:"100%",height:"100%"},children:u.jsx("canvas",{ref:l,style:{display:"block"},children:s})})})}function me(e){return u.jsx(K,{children:u.jsx(de,{...e})})}export{me as C,he as E};
//# sourceMappingURL=react-three-fiber.esm-DzfhFC4W.js.map
