import{r as t,g as M,z as U,j as u,B as q,f as K,T as V,G as Z,I as _,J as $,l as ee,m as ne,N as re,Q as te,R as oe,X as se}from"./projects-BRTcxqWl.js";const he=t.memo(({experiences:e=[]})=>{const r=M(o=>o.setExperiences),s=M(o=>o.setCurrentExperience),c=M(o=>o.currentExperience);return t.useEffect(()=>{if(e.length===0)return;r(e.map(a=>a.name));const o=U()??e[0]?.name;s(o)},[r,e,s]),t.useMemo(()=>{if(!c)return null;const o=e.find(a=>a.name===c)?.Experience;return o?u.jsx(t.Suspense,{fallback:"Loading experienceâ€¦",children:u.jsx(o,{})}):null},[e,c])});function N(e,r){let s;return(...c)=>{window.clearTimeout(s),s=window.setTimeout(()=>e(...c),r)}}function ie({debounce:e,scroll:r,polyfill:s,offsetSize:c}={debounce:0,scroll:!1,offsetSize:!1}){const d=s||(typeof window>"u"?class{}:window.ResizeObserver);if(!d)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=t.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),n=t.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),h=e?typeof e=="number"?e:e.scroll:null,p=e?typeof e=="number"?e:e.resize:null,w=t.useRef(!1);t.useEffect(()=>(w.current=!0,()=>void(w.current=!1)));const[C,x,f]=t.useMemo(()=>{const i=()=>{if(!n.current.element)return;const{left:j,top:H,width:B,height:z,bottom:O,right:k,x:S,y:g}=n.current.element.getBoundingClientRect(),l={left:j,top:H,width:B,height:z,bottom:O,right:k,x:S,y:g};n.current.element instanceof HTMLElement&&c&&(l.height=n.current.element.offsetHeight,l.width=n.current.element.offsetWidth),Object.freeze(l),w.current&&!ae(n.current.lastBounds,l)&&a(n.current.lastBounds=l)};return[i,p?N(i,p):i,h?N(i,h):i]},[a,c,h,p]);function E(){n.current.scrollContainers&&(n.current.scrollContainers.forEach(i=>i.removeEventListener("scroll",f,!0)),n.current.scrollContainers=null),n.current.resizeObserver&&(n.current.resizeObserver.disconnect(),n.current.resizeObserver=null),n.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",n.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",n.current.orientationHandler))}function y(){n.current.element&&(n.current.resizeObserver=new d(f),n.current.resizeObserver.observe(n.current.element),r&&n.current.scrollContainers&&n.current.scrollContainers.forEach(i=>i.addEventListener("scroll",f,{capture:!0,passive:!0})),n.current.orientationHandler=()=>{f()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",n.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",n.current.orientationHandler))}const L=i=>{!i||i===n.current.element||(E(),n.current.element=i,n.current.scrollContainers=W(i),y())};return ue(f,!!r),ce(x),t.useEffect(()=>{E(),y()},[r,f,x]),t.useEffect(()=>E,[]),[L,o,C]}function ce(e){t.useEffect(()=>{const r=e;return window.addEventListener("resize",r),()=>void window.removeEventListener("resize",r)},[e])}function ue(e,r){t.useEffect(()=>{if(r){const s=e;return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)}},[e,r])}function W(e){const r=[];if(!e||e===document.body)return r;const{overflow:s,overflowX:c,overflowY:d}=window.getComputedStyle(e);return[s,c,d].some(o=>o==="auto"||o==="scroll")&&r.push(e),[...r,...W(e.parentElement)]}const le=["x","y","top","bottom","left","right","width","height"],ae=(e,r)=>le.every(s=>e[s]===r[s]);function fe({ref:e,children:r,fallback:s,resize:c,style:d,gl:o,events:a=ne,eventSource:n,eventPrefix:h,shadows:p,linear:w,flat:C,legacy:x,orthographic:f,frameloop:E,dpr:y,performance:L,raycaster:i,camera:j,scene:H,onPointerMissed:B,onCreated:z,...O}){t.useMemo(()=>K(V),[]);const k=Z(),[S,g]=ie({scroll:!0,debounce:{scroll:50,resize:0},...c}),l=t.useRef(null),T=t.useRef(null);t.useImperativeHandle(e,()=>l.current);const I=_(B),[X,Y]=t.useState(!1),[A,D]=t.useState(!1);if(X)throw X;if(A)throw A;const R=t.useRef(null);$(()=>{const b=l.current;if(g.width>0&&g.height>0&&b){R.current||(R.current=ee(b));async function J(){await R.current.configure({gl:o,scene:H,events:a,shadows:p,linear:w,flat:C,legacy:x,orthographic:f,frameloop:E,dpr:y,performance:L,raycaster:i,camera:j,size:g,onPointerMissed:(...m)=>I.current==null?void 0:I.current(...m),onCreated:m=>{m.events.connect==null||m.events.connect(n?re(n)?n.current:n:T.current),h&&m.setEvents({compute:(F,v)=>{const P=F[h+"X"],Q=F[h+"Y"];v.pointer.set(P/v.size.width*2-1,-(Q/v.size.height)*2+1),v.raycaster.setFromCamera(v.pointer,v.camera)}}),z?.(m)}}),R.current.render(u.jsx(k,{children:u.jsx(te,{set:D,children:u.jsx(t.Suspense,{fallback:u.jsx(oe,{set:Y}),children:r??null})})}))}J()}}),t.useEffect(()=>{const b=l.current;if(b)return()=>se(b)},[]);const G=n?"none":"auto";return u.jsx("div",{ref:T,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:G,...d},...O,children:u.jsx("div",{ref:S,style:{width:"100%",height:"100%"},children:u.jsx("canvas",{ref:l,style:{display:"block"},children:s})})})}function me(e){return u.jsx(q,{children:u.jsx(fe,{...e})})}export{me as C,he as E};
//# sourceMappingURL=react-three-fiber.esm-BCsrm-ud.js.map
